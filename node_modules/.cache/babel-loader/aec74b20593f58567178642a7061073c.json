{"ast":null,"code":"var _jsxFileName = \"/home/andrey/projects/videowall/front/src/components/encoder_list/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport http from '../../components/app/http';\nimport { Form, Button, Modal } from \"react-bootstrap\";\nimport Toast from '../../components/app/toast';\nimport MyButton from '../../components/ui/MyButton';\n\nasync function getEncoderList(headers, unauthorized) {\n  return fetch('/v1/encoder_list', {\n    method: 'GET',\n    headers: headers()\n  }).then(data => data.json()).then(data => {\n    if ((data === null || data === void 0 ? void 0 : data.status) === 'ok') return {\n      'type': 'info',\n      'title': 'Information',\n      'body': data.msg\n    };\n    unauthorized(data);\n    return {\n      'type': 'danger',\n      'title': 'Error',\n      'body': data.msg.err\n    };\n  }).catch(e => {\n    return {\n      'type': 'danger',\n      'title': 'Critical Error',\n      'body': 'Server error'\n    };\n  });\n}\n\nasync function putEncoderList(items, headers, unauthorized) {\n  return fetch('/v1/encoder_list', {\n    method: 'PUT',\n    headers: headers(),\n    body: JSON.stringify(items)\n  }).then(data => data.json()).then(data => {\n    if ((data === null || data === void 0 ? void 0 : data.status) === 'ok') return {\n      'type': 'info',\n      'title': 'Information',\n      'body': 'User data successfully updated'\n    };\n    unauthorized(data);\n    return {\n      'type': 'danger',\n      'title': 'Error',\n      'body': data.msg.err\n    };\n  }).catch(e => {\n    return {\n      'type': 'danger',\n      'title': 'Critical Error',\n      'body': 'Server error'\n    };\n  });\n}\n\nexport default function EncoderList() {\n  const {\n    headers,\n    unauthorized\n  } = http();\n  const [items, setItems] = useState([]);\n  const [toast, setToast] = useState({});\n  const [formRemove, setFormRemove] = useState({\n    'show': false,\n    index: -1\n  });\n  const [form, setForm] = useState({\n    'show': false\n  });\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const k = {\n      'items': items\n    };\n    await putEncoderList(k, headers, unauthorized).then(res => setToast({ ...res,\n      show: true\n    }));\n  };\n\n  function onAddClicked() {\n    toast.show = false;\n    setForm({\n      'show': true,\n      'title': \"Add a new video stream\",\n      'button': \"Add\",\n      'name': '',\n      'url1': '',\n      'url2': '',\n      'index': -1\n    });\n  }\n\n  function onEditClicked(key) {\n    toast.show = false;\n    setForm({\n      'show': true,\n      'title': \"Edit the video stream\",\n      'button': \"Edit\",\n      'name': items[key].name,\n      'url1': items[key].url1,\n      'url2': items[key].url2,\n      'index': key\n    });\n  }\n\n  function onRemoveClicked() {\n    toast.show = false;\n    setItems(items.filter((_, index) => index !== formRemove.index));\n    setFormRemove({\n      \"show\": false\n    });\n  }\n\n  function addStream(index) {\n    toast.show = false;\n    const pos = index < 0 ? items.length + 1 : items[index].pos;\n    const item = {\n      'name': form.name,\n      'url1': form.url1,\n      'url2': form.url2,\n      'pos': pos,\n      'transport': 'tcp'\n    };\n\n    if (index < 0) {\n      setItems([...items, item]);\n    } else items[index] = item;\n\n    setForm({ ...form,\n      'show': false\n    });\n  }\n\n  function formOnChange(e) {\n    toast.show = false;\n    setForm({ ...form,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  function onFormEdit() {\n    var _form$url, _form$name;\n\n    return (form === null || form === void 0 ? void 0 : (_form$url = form.url1) === null || _form$url === void 0 ? void 0 : _form$url.length) > 5 && (form === null || form === void 0 ? void 0 : (_form$name = form.name) === null || _form$name === void 0 ? void 0 : _form$name.length) >= 3;\n  }\n\n  useEffect(() => {\n    getEncoderList(headers, unauthorized).then(res => {\n      if (res.type === 'info') setItems(res.body);else setToast({ ...res,\n        show: true\n      });\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    show: formRemove === null || formRemove === void 0 ? void 0 : formRemove.show,\n    onHide: () => setFormRemove(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Do you really want to remove the '\", formRemove === null || formRemove === void 0 ? void 0 : formRemove.name, \"' video stream?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => setFormRemove({ ...formRemove,\n      'show': false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: onRemoveClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"Remove\"))), /*#__PURE__*/React.createElement(Modal, {\n    show: form === null || form === void 0 ? void 0 : form.show,\n    dialogClassName: \"modal-100w\",\n    onHide: () => setForm({ ...form,\n      'show': false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, form === null || form === void 0 ? void 0 : form.title)), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    autoFocus: true,\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Enter a name\",\n    value: form === null || form === void 0 ? void 0 : form.name,\n    onChange: formOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"url1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"RTSP stream (high quality)\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"url1\",\n    placeholder: \"Enter a url\",\n    value: form === null || form === void 0 ? void 0 : form.url1,\n    onChange: formOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"url2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, \"RTSP stream (low quality)\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    name: \"url2\",\n    placeholder: \"Enter a url\",\n    value: form === null || form === void 0 ? void 0 : form.url2,\n    onChange: formOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: () => setForm({ ...form,\n      'show': false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    disabled: !onFormEdit(),\n    onClick: () => addStream(form === null || form === void 0 ? void 0 : form.index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, form === null || form === void 0 ? void 0 : form.button))), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"content__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, \"\\u0412\\u0418\\u0414\\u0415\\u041E \\u041F\\u041E\\u0422\\u041E\\u041A\\u0418\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content__window\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content__window-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"content__window-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, \"\\u0421\\u041F\\u0418\\u0421\\u041E\\u041A \\u0412\\u0418\\u0414\\u0415\\u041E \\u041F\\u041E\\u0422\\u041E\\u041A\\u041E\\u0412 \\u0412 \\u0421\\u0418\\u0421\\u0422\\u0415\\u041C\\u0415\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content__window-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(MyButton, {\n    buttonText: {\n      text: \"Добавить\"\n    },\n    onClick: onAddClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(MyButton, {\n    buttonText: {\n      text: \"Обновить\"\n    },\n    type: \"submit\",\n    disabled: (items === null || items === void 0 ? void 0 : items.length) < 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(MyButton, {\n    buttonText: {\n      text: \"Удалить\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"content__form form__table\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    striped: true,\n    bordered: true,\n    hover: true,\n    variant: \"dark\",\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table__head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 37\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 37\n    }\n  }, \"\\u041D\\u0410\\u0417\\u0412\\u0410\\u041D\\u0418\\u0415\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 37\n    }\n  }, \"\\u0410\\u0414\\u0420\\u0415\\u0421 \\u0418\\u0421\\u0422\\u041E\\u0427\\u041D\\u0418\\u041A\\u0410 1\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 37\n    }\n  }, \"\\u0410\\u0414\\u0420\\u0415\\u0421 \\u0418\\u0421\\u0422\\u041E\\u0427\\u041D\\u0418\\u041A\\u0410 2\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 37\n    }\n  }, \"\\u0423\\u041F\\u0420\\u0410\\u0412\\u041B\\u0415\\u041D\\u0418\\u0415\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 29\n    }\n  }, items.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"table__checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 49\n    }\n  })), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 45\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 45\n    }\n  }, item.url1), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 45\n    }\n  }, item.url2), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-encoder\",\n    onClick: () => onEditClicked(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.99987 11.9166C8.22632 11.9166 7.48445 11.6093 6.93747 11.0624C6.39049 10.5154 6.0832 9.77351 6.0832 8.99996C6.0832  8.22641 6.39049 7.48455 6.93747 6.93756C7.48445 6.39058 8.22632 6.08329 8.99987 6.08329C9.77341 6.08329 10.5153 6.39058 11.0623  6.93756C11.6092 7.48455 11.9165 8.22641 11.9165 8.99996C11.9165 9.77351 11.6092 10.5154 11.0623 11.0624C10.5153 11.6093 9.77341  11.9166 8.99987 11.9166ZM15.1915 9.80829C15.2249 9.54163 15.2499 9.27496 15.2499 8.99996C15.2499 8.72496 15.2249 8.44996 15.1915  8.16663L16.9499 6.80829C17.1082 6.68329 17.1499 6.45829 17.0499 6.27496L15.3832 3.39163C15.2832 3.20829 15.0582 3.13329 14.8749  3.20829L12.7999 4.04163C12.3665 3.71663 11.9165 3.43329 11.3915 3.22496L11.0832 1.01663C11.0499 0.816626 10.8749 0.666626 10.6665  0.666626H7.3332C7.12487 0.666626 6.94987 0.816626 6.91653 1.01663L6.6082 3.22496C6.0832 3.43329 5.6332 3.71663 5.19987 4.04163L3.12487  3.20829C2.94153 3.13329 2.71653 3.20829 2.61653 3.39163L0.949866 6.27496C0.841533 6.45829 0.891533 6.68329 1.04987 6.80829L2.8082  8.16663C2.77487 8.44996 2.74987 8.72496 2.74987 8.99996C2.74987 9.27496 2.77487 9.54163 2.8082 9.80829L1.04987 11.1916C0.891533 11.3166  0.841533 11.5416 0.949866 11.725L2.61653 14.6083C2.71653 14.7916 2.94153 14.8583 3.12487 14.7916L5.19987 13.95C5.6332 14.2833 6.0832  14.5666 6.6082 14.775L6.91653 16.9833C6.94987 17.1833 7.12487 17.3333 7.3332 17.3333H10.6665C10.8749 17.3333 11.0499 17.1833 11.0832  16.9833L11.3915 14.775C11.9165 14.5583 12.3665 14.2833 12.7999 13.95L14.8749 14.7916C15.0582 14.8583 15.2832 14.7916 15.3832 14.6083L17.0499  11.725C17.1499 11.5416 17.1082 11.3166 16.9499 11.1916L15.1915 9.80829Z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 57\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-encoder\",\n    onClick: () => setFormRemove({\n      \"show\": true,\n      'index': index,\n      \"name\": item.name\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"15\",\n    height: \"16\",\n    viewBox: \"0 0 15 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.2082 1.33333H10.8541L9.89573 0.5H5.10407L4.14573 1.33333H0.791565V3H14.2082V1.33333ZM1.7499 13.8333C1.7499  14.2754 1.95183 14.6993 2.31128 15.0118C2.67072 15.3244 3.15823 15.5 3.66657 15.5H11.3332C11.8416 15.5 12.3291 15.3244  12.6885 15.0118C13.048 14.6993 13.2499 14.2754 13.2499 13.8333V3.83333H1.7499V13.8333Z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 57\n    }\n  })))))))), /*#__PURE__*/React.createElement(Toast, {\n    show: toast === null || toast === void 0 ? void 0 : toast.show,\n    type: toast === null || toast === void 0 ? void 0 : toast.type,\n    title: toast === null || toast === void 0 ? void 0 : toast.title,\n    body: toast === null || toast === void 0 ? void 0 : toast.body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 21\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/andrey/projects/videowall/front/src/components/encoder_list/index.js"],"names":["React","useState","useEffect","http","Form","Button","Modal","Toast","MyButton","getEncoderList","headers","unauthorized","fetch","method","then","data","json","status","msg","err","catch","e","putEncoderList","items","body","JSON","stringify","EncoderList","setItems","toast","setToast","formRemove","setFormRemove","index","form","setForm","onSubmit","preventDefault","k","res","show","onAddClicked","onEditClicked","key","name","url1","url2","onRemoveClicked","filter","_","addStream","pos","length","item","formOnChange","target","value","onFormEdit","type","title","button","text","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport http from '../../components/app/http';\nimport { Form, Button, Modal} from \"react-bootstrap\"\nimport Toast from '../../components/app/toast';\nimport MyButton from '../../components/ui/MyButton';\n\nasync function getEncoderList(headers, unauthorized) {\n    return fetch('/v1/encoder_list', {\n        method: 'GET',\n        headers: headers(),\n    })\n    .then(data => data.json())\n    .then(data => {\n        if(data?.status === 'ok')\n            return {'type': 'info', 'title':'Information', 'body': data.msg}\n\n        unauthorized(data)\n        return {'type': 'danger', 'title':'Error', 'body': data.msg.err}\n    })\n    .catch(e => { return {'type': 'danger', 'title':'Critical Error', 'body': 'Server error'}})\n}\n\nasync function putEncoderList(items, headers, unauthorized) {\n    return fetch('/v1/encoder_list', {\n        method: 'PUT',\n        headers: headers(),\n        body: JSON.stringify(items)\n    })\n    .then(data => data.json())\n    .then(data => {\n        if(data?.status === 'ok')\n            return {'type': 'info', 'title':'Information', 'body': 'User data successfully updated'}\n\n        unauthorized(data)\n        return {'type': 'danger', 'title':'Error', 'body': data.msg.err}\n    })\n    .catch(e => { return {'type': 'danger', 'title':'Critical Error', 'body': 'Server error'}})\n}\n\nexport default function EncoderList() {\n    const {headers, unauthorized} = http();\n    const [items, setItems] = useState([]);\n    const [toast, setToast] = useState({});\n    const [formRemove, setFormRemove] = useState({'show':false, index: -1});\n    const [form, setForm] = useState({'show':false});\n\n    const onSubmit = async e => {\n        e.preventDefault();\n        const k = {\n            'items': items\n        }\n\n        await putEncoderList(k, headers, unauthorized)\n        .then(res => setToast({...res, show: true}))\n    };\n\n    function onAddClicked() {\n        toast.show = false\n        setForm({\n                'show': true,\n                'title': \"Add a new video stream\",\n                'button': \"Add\",\n                'name': '',\n                'url1': '',\n                'url2': '',\n                'index': -1\n            }\n        )\n    }\n    function onEditClicked(key) {\n        toast.show = false\n        setForm({\n                'show': true,\n                'title': \"Edit the video stream\",\n                'button': \"Edit\",\n                'name': items[key].name,\n                'url1': items[key].url1,\n                'url2': items[key].url2,\n                'index': key\n            }\n        )\n    }\n    function onRemoveClicked() {\n        toast.show = false\n        setItems(items.filter((_, index) => index !== formRemove.index))\n        setFormRemove({\"show\": false})\n    }\n\n    function addStream(index) {\n        toast.show = false\n        const pos = index < 0 ? items.length + 1 : items[index].pos\n        const item = {\n            'name': form.name,\n            'url1': form.url1,\n            'url2': form.url2,\n            'pos':  pos,\n            'transport': 'tcp'\n\n        }\n        if(index < 0) {\n            setItems(\n                [\n                    ...items\n                    , item\n                ]\n            )\n        } else \n            items[index] = item\n        setForm({...form, 'show': false})\n    }\n\n    function formOnChange(e) {\n        toast.show = false\n        setForm({\n            ...form, \n            [e.target.name]: e.target.value\n        });\n    }\n    function onFormEdit() {\n        return form?.url1?.length > 5 && form?.name?.length >= 3\n\n    }\n    \n    useEffect(() => {\n        getEncoderList(headers, unauthorized)\n            .then(res => {\n                if(res.type === 'info')\n                    setItems(res.body)\n                else \n                    setToast({...res, show: true})\n            })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return (\n        <>\n        <Modal\n            show={formRemove?.show}\n            onHide={() => setFormRemove(false)}\n        >\n            <Modal.Body>\n                <h5 className=\"text-center\">Do you really want to remove the '{formRemove?.name}' video stream?</h5>\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button variant='secondary' onClick={()=> setFormRemove({...formRemove, 'show': false})}>Close</Button>\n                <Button variant=\"primary\" onClick={onRemoveClicked}>Remove</Button>\n            </Modal.Footer>\n        </Modal>\n        <Modal\n            show={form?.show}\n            dialogClassName='modal-100w'\n            onHide={() => setForm({...form, 'show': false})}\n        >\n        <Modal.Header closeButton>\n            <Modal.Title>\n                {form?.title}\n            </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            <Form>\n                <Form.Group className=\"mb-3\">\n                <Form.Label>Name</Form.Label>\n                <Form.Control\n                    autoFocus\n                    type=\"text\"\n                    name=\"name\"\n                    placeholder=\"Enter a name\"\n                    value={form?.name}\n                    onChange={formOnChange}\n                />\n                </Form.Group>\n                <Form.Group className=\"mb-3\" controlId=\"url1\">\n                    <Form.Label>RTSP stream (high quality)</Form.Label>\n                    <Form.Control\n                        type=\"text\"\n                        name=\"url1\"\n                        placeholder=\"Enter a url\"\n                        value={form?.url1}\n                        onChange={formOnChange}\n                    />\n                </Form.Group>\n                <Form.Group className=\"mb-3\" controlId=\"url2\">\n                    <Form.Label>RTSP stream (low quality)</Form.Label>\n                    <Form.Control\n                        type=\"text\"\n                        name=\"url2\"\n                        placeholder=\"Enter a url\"\n                        value={form?.url2}\n                        onChange={formOnChange}\n                    />\n                </Form.Group>\n            </Form>\n        </Modal.Body>\n        <Modal.Footer>\n            <Button variant='secondary' onClick={()=> setForm({...form, 'show': false})}>Close</Button>\n            <Button variant='primary' disabled={!onFormEdit()} onClick={() => addStream(form?.index)}>{form?.button}</Button>\n        </Modal.Footer>\n        </Modal>\n\n            <h2 className=\"content__title\">ВИДЕО ПОТОКИ</h2>\n            <div className=\"content__window\">\n                <div className=\"content__window-top\">\n                    <h3 className=\"content__window-title\">СПИСОК ВИДЕО ПОТОКОВ В СИСТЕМЕ</h3>\n                    <div className=\"content__window-buttons\">\n                        <MyButton buttonText={{text: \"Добавить\"}} onClick={onAddClicked}/>\n                        <MyButton buttonText={{text: \"Обновить\"}} type=\"submit\" disabled={items?.length < 1}/>\n                        <MyButton buttonText={{text: \"Удалить\"}}/>\n                    </div>\n                </div>\n                <hr />\n\n                <form className=\"content__form form__table\" onSubmit={onSubmit}>\n                        <div striped bordered hover variant='dark' className=\"table\">\n                            <div className=\"table__head\">\n                                <div>\n                                    <div>#</div>\n                                    <div>НАЗВАНИЕ</div>\n                                    <div>АДРЕС ИСТОЧНИКА 1</div>\n                                    <div>АДРЕС ИСТОЧНИКА 2</div>\n                                    <div>УПРАВЛЕНИЕ</div>\n                                </div>\n                            </div>\n                            \n                            {/* <hr/> */}\n                            \n                            <div className=\"table__body\">\n                                {\n                                    items.map((item, index) => \n                                        <tr key={index}>\n                                            <th>\n                                                <input type=\"checkbox\" className=\"table__checkbox\"/> \n                                            </th>\n                                            <th>{item.name}</th>\n                                            <th>{item.url1}</th>\n                                            <th>{item.url2}</th>\n                                            <th>\n                                                <button className=\"button-encoder\" onClick={() => onEditClicked(index)}>\n                                                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                        <path d=\"M8.99987 11.9166C8.22632 11.9166 7.48445 11.6093 6.93747 11.0624C6.39049 10.5154 6.0832 9.77351 6.0832 8.99996C6.0832 \n                                                        8.22641 6.39049 7.48455 6.93747 6.93756C7.48445 6.39058 8.22632 6.08329 8.99987 6.08329C9.77341 6.08329 10.5153 6.39058 11.0623 \n                                                        6.93756C11.6092 7.48455 11.9165 8.22641 11.9165 8.99996C11.9165 9.77351 11.6092 10.5154 11.0623 11.0624C10.5153 11.6093 9.77341 \n                                                        11.9166 8.99987 11.9166ZM15.1915 9.80829C15.2249 9.54163 15.2499 9.27496 15.2499 8.99996C15.2499 8.72496 15.2249 8.44996 15.1915 \n                                                        8.16663L16.9499 6.80829C17.1082 6.68329 17.1499 6.45829 17.0499 6.27496L15.3832 3.39163C15.2832 3.20829 15.0582 3.13329 14.8749 \n                                                        3.20829L12.7999 4.04163C12.3665 3.71663 11.9165 3.43329 11.3915 3.22496L11.0832 1.01663C11.0499 0.816626 10.8749 0.666626 10.6665 \n                                                        0.666626H7.3332C7.12487 0.666626 6.94987 0.816626 6.91653 1.01663L6.6082 3.22496C6.0832 3.43329 5.6332 3.71663 5.19987 4.04163L3.12487 \n                                                        3.20829C2.94153 3.13329 2.71653 3.20829 2.61653 3.39163L0.949866 6.27496C0.841533 6.45829 0.891533 6.68329 1.04987 6.80829L2.8082 \n                                                        8.16663C2.77487 8.44996 2.74987 8.72496 2.74987 8.99996C2.74987 9.27496 2.77487 9.54163 2.8082 9.80829L1.04987 11.1916C0.891533 11.3166 \n                                                        0.841533 11.5416 0.949866 11.725L2.61653 14.6083C2.71653 14.7916 2.94153 14.8583 3.12487 14.7916L5.19987 13.95C5.6332 14.2833 6.0832 \n                                                        14.5666 6.6082 14.775L6.91653 16.9833C6.94987 17.1833 7.12487 17.3333 7.3332 17.3333H10.6665C10.8749 17.3333 11.0499 17.1833 11.0832 \n                                                        16.9833L11.3915 14.775C11.9165 14.5583 12.3665 14.2833 12.7999 13.95L14.8749 14.7916C15.0582 14.8583 15.2832 14.7916 15.3832 14.6083L17.0499 \n                                                        11.725C17.1499 11.5416 17.1082 11.3166 16.9499 11.1916L15.1915 9.80829Z\"/>\n                                                    </svg>\n                                                </button>\n                                                <button className=\"button-encoder\" onClick={() => setFormRemove({\"show\":true, 'index': index, \"name\": item.name})}>\n                                                    <svg width=\"15\" height=\"16\" viewBox=\"0 0 15 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                                        <path d=\"M14.2082 1.33333H10.8541L9.89573 0.5H5.10407L4.14573 1.33333H0.791565V3H14.2082V1.33333ZM1.7499 13.8333C1.7499 \n                                                        14.2754 1.95183 14.6993 2.31128 15.0118C2.67072 15.3244 3.15823 15.5 3.66657 15.5H11.3332C11.8416 15.5 12.3291 15.3244 \n                                                        12.6885 15.0118C13.048 14.6993 13.2499 14.2754 13.2499 13.8333V3.83333H1.7499V13.8333Z\"/>\n                                                    </svg>\n                                                </button>\n                                            </th>\n                                        </tr>\n                                    )\n                                }\n                            </div> \n                        </div>\n                    <Toast show={toast?.show} type={toast?.type} title={toast?.title} body={toast?.body}/>\n                </form>\n            </div>\n\n\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}